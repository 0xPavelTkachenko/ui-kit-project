$color-diamond = #4eb7a8
$color-red = #e75735
$color-gray = #e5e5e5

.toggle
  &__checkbox
    display none

  &__pseudo-checkbox
    width 5rem
    height 2rem
    border-radius 1rem
    cursor pointer
    display inline-block
    overflow hidden
    position relative

  &__circle
    width 1.5rem
    height 1.5rem
    border-radius 50%
    background-color #fff
    position absolute
    top 50%

  &__checkbox:not(:checked) + &__pseudo-checkbox
    background-color $color-diamond
    animation to-color-gray 0.2s linear
    animation-iteration-count 1
    animation-fill-mode forwards

  &__checkbox:checked + &__pseudo-checkbox
    background-color $color-gray
    animation to-color-diamond 0.2s linear
    animation-iteration-count 1
    animation-fill-mode forwards

  &__checkbox:not(:checked) + &__pseudo-checkbox > &__circle
    left unset
    right 0.25rem
    transform translateY(-50%)
    animation circle-left 0.2s linear
    animation-iteration-count 1
    animation-fill-mode forwards

  &__checkbox:checked + &__pseudo-checkbox > &__circle
    left 0.25rem
    right unset
    transform translateY(-50%)
    animation circle-right 0.2s linear
    animation-iteration-count 1
    animation-fill-mode forwards

  &__circle::before
    content 'ON'
    color #fff
    font-weight bold
    position absolute
    font-size 1rem
    right 2rem
    display inline-block
    top 50%
    transform translateY(-50%)

  &__circle::after
    content 'OFF'
    color #fff
    font-weight bold
    position absolute
    font-size 1rem
    left 2rem
    top 50%
    transform translateY(-50%)

  &_color_red
    & ^[0]__checkbox:not(:checked) + ^[0]__pseudo-checkbox
      background-color $color-red

    & ^[0]__checkbox:checked + ^[0]__pseudo-checkbox
      background-color $color-gray
      animation to-color-red 0.2s linear
      animation-iteration-count 1
      animation-fill-mode forwards

@keyframes circle-left
  to
    transform translate(-2.916666666rem, -50%)

@keyframes circle-right
  to
    transform translate(2.916666666rem, -50%)

@keyframes to-color-diamond
  to
    background-color $color-diamond

@keyframes to-color-red
  to
    background-color $color-red

@keyframes to-color-gray
  to
    background-color $color-gray
